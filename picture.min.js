/*! Picture v2.3.1 - Picture element polyfill for responsive images. Authors & copyright (c) 2013: WebLinc, David Knight. Forked & modified by Ivan NikoliÄ‡ */
"HTMLPictureElement"in window||function(a){"use strict";var b=a.document,c="",d=(a.addEventListener||(c="on")&&a.attachEvent,a.removeEventListener||a.detachEvent,/[^\s]+/g),e=function(a,b){var c=[];for(a=a.previousSibling;null!==a;)(!b||b(a))&&c.push(a),a=a.previousSibling;return c},f=function(a,b){var c=[];for(a=a.nextSibling;null!==a;)(!b||b(a))&&c.push(a),a=a.nextSibling;return c},g=function(a){switch(a.nodeName.toUpperCase()){case"SPAN":return!0;default:return!1}},h=function(a){switch(a.nodeName.toUpperCase()){case"IMG":return!0;default:return!1}},i=function(a){for(var b=0,c=a.length;c>b;b++)null!==a[b].className.match(/postpone-placeholder/gi)&&(a[b].className+=" hidden ",a[b].style.display="none")},j=function(a,b,c){a.src=b.pictureCurrentSrc=c.src,c.element.appendChild(a),c.element.className+=" picture-source-loaded ",null===b.className.match(/picture-parsed/gi)&&(b.className+=" picture-parsed ")},k=function(a){for(var b=0,c=a.length;c>b;b++)if(null!==a[b].className.match(/picture-source-loaded/gi))return!0;return!1},l=function(a,c){var d=a.pictureImage,l=f(a,h),m=e(c.element,g);if(k(m)!==!0)if(null===a.parentNode)c.mql.removeListener(c.listener),c=a=null;else if(d||(d=a.pictureImage=b.createElement("img"),d.alt=a.pictureAlt),c&&c.src!==a.pictureCurrentSrc)if(0===l.length)j(d,a,c);else{var n=new Image;n.onload=function(){j(d,a,c),i(l)},n.src=a.pictureCurrentSrc=c.src}},m=function(a){for(var c,d=a||b.getElementsByTagName("span"),e=0;"undefined"!=typeof(c=d[e]);e++)if("pictureSource"in c)for(var f,g=c.pictureSource.length-1;"undefined"!=typeof(f=c.pictureSource[g]);g--)f.listener||(f.listener=n(c,f),f.mql.addListener(f.listener))},n=function(a,b){return function(c){var d=a.pictureSource,e=b;c.matches||(e=d[d.join("").lastIndexOf("1")]),e&&l(a,e)}},o=function(a,b,c,d){return{element:a,src:b,mql:c,listener:d,toString:function(){return this.mql.matches?1:0}}},p=function(b,c,e,f){for(var g,h=e.indexOf(",")>=0&&e.split(",")||[e],i=null,j=0;"undefined"!=typeof(g=h[j]);j++){var k=f||"all",l=g.match(d),m=l[0],n=parseFloat(l[1],10),p=null;n>1&&(k=["(-webkit-min-device-pixel-ratio: "+n+")","(min-resolution: "+n+"dppx)","(min-resolution: "+96*n+"dpi)","not all"].join(" and "+k+", ")),k&&(p=o(c,m,a.matchMedia(k),null),p.mql.matches&&(i=p),b.pictureSource.push(p))}return i};a.Picture={parse:function(c){for(var d,e=c||b.getElementsByTagName("span"),f=0;"undefined"!=typeof(d=e[f]);f++)if(null!==d.getAttribute("data-picture")&&!("pictureSource"in d)){var g=d.getElementsByTagName("span"),h=d.getAttribute("data-srcset"),i="",j=d.getElementsByTagName("img")[0],k=null,n=null,q=null;if(d.pictureSource=[],d.pictureImage=j&&"NOSCRIPT"!==j.parentNode.nodeName&&j,d.pictureAlt=d.getAttribute("data-alt")||j&&j.getAttribute("alt")||"picture",d.pictureCurrentSrc="",h?(n=p(d,d,h,""),n&&(q=n)):(i=d.getAttribute("data-src"),i&&(q=k=o(d,i,null,null))),!h&&!i)for(var r,s=g.length-1;"undefined"!=typeof(r=g[s]);s--){var t=r.getAttribute("data-media")||"(min-width:0px)";h=r.getAttribute("data-srcset"),i="",h?(n=p(d,r,h,t),n&&(q=n)):t&&(i=r.getAttribute("data-src"),i&&(k=o(r,i,a.matchMedia(t),null),k.mql.matches&&(q=k),d.pictureSource.push(k)))}q&&l(d,q)}m(e)}}}(window);